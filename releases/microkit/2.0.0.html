<!DOCTYPE html>
<!--
     SPDX-License-Identifier: CC-BY-SA-4.0
     SPDX-FileCopyrightText: 2020 seL4 Project a Series of LF Projects, LLC.
-->
<!-- Page last generated 2025-04-03 03:23:07 +0000 -->
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>2.0.0 | seL4 docs</title>

    <!-- Our stylesheet and theme stylesheet.  Contains bootstrap. -->
    <link rel="stylesheet" href="/assets/css/style.css" type="text/css">
    <!-- Font awesome -->
    <link href="https://use.fontawesome.com/releases/v5.0.8/css/all.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
    <!-- Pygments syntax highlighting  -->
    <link rel="stylesheet" href="/assets/css/highlighting/trac.css" type="text/css">
    <link rel="icon" type="image/x-icon" href="/assets/favicon.ico"><script defer data-domain="docs.sel4.systems"
	    src="https://analytics.sel4.systems/js/script.js"></script></head>

  <body class="container-fluid">

    



<header>
  <ul class="row menu">
    <li class="col-xs-12 col-md-2" >
            <a href="https://sel4.systems" class="skip-icon">
              <img class="img-responsive" src="/assets/logo-text-white.svg" alt="seL4 logo" />
            </a>
    </li>
    <li class="col-xs-12 col-md-10 menu">
      <nav aria-label="Banner links">
        <h2><a href="/Resources" />Resources</h2>
        <h2><a href="/processes" />Contributing</a></h2>
        <h2><a href="/projects" />Projects</h2>
        <h2><a href="/Tutorials" />Tutorials</h2>
        <iframe title="DuckDuckGo search bar" src="https://duckduckgo.com/search.html?site=docs.sel4.systems&prefill=Search%20sel4.systems" style="overflow:hidden;margin-bottom:10px; padding:0;height:40px;float:right;border-width: 0px"></iframe>
      </nav>
    </li>
  </ul>
  <div class="clear"></div>
  
<div class="breadcrumbs bootstrap hidden-sm-down">
  <nav class="sel-breadcrumb" aria-label="Breadcrumb" >
    <ol class=" list-unstyled" vocab="http://schema.org/" typeof="BreadcrumbList">
      
      
        

        

        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
            <a property="item" typeof="WebPage" href="/">
              <span property="name"><b>seL4 Docs</b></span>
            </a>
            <meta property="position" content="1" />
        </li>
      
        

        
          <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
            <span property="name">2.0.0</span>
            <meta property="position" content="2" /></li>
          
    </ol>
  </nav>
  <nav class="sel-version" aria-label="Current Versions">
    <ol class="list-unstyled">
      <li class="list-unstyled text-right" style="margin-left:auto; padding:0rem 0rem;">
        Current versions:</li>
      <li class="list-unstyled text-right">
      <a href="/releases/sel4/13.0.0"><b>seL4-13.0.0</b></a></li>
      <li class="list-unstyled text-right">
      <a href="/releases/microkit/2.0.1"><b>microkit-2.0.1</b></a></li>
      <li class="list-unstyled text-right">
      <a href="/releases/camkes/camkes-3.11.0"><b>camkes-3.11.0</b></a></li>
      <li class="list-unstyled text-right">
      <a href="/releases/capdl/0.3.0"><b>capDL-0.3.0</b></a></li>
      </ol>
  </nav>
  <div class='clear'></div>
</div>


</header>

    <main>
      <div class="row">
  <div class="hidden-xs col-sm-4 col-md-3 col-lg-2">
    


<div class="sidebar">
















</div>

  </div>
  <div class="content col-sm-8 col-md-6 col-lg-7 main">
    <h1 id="microkit-release-200">Microkit Release 2.0.0</h1>

<h4 id="2025-03-06">2025-03-06</h4>

<p>This release contains various bug fixes, quality-of-life changes, features, and
new board support.</p>

<p>This is a major version bump due to a breaking change. Below the release notes,
there is a section on how to upgrade from Microkit 1.4.1.</p>

<h3 id="features">Features</h3>

<ul>
  <li>Add support for virtual machines with multiple vCPUs.</li>
  <li>Add support for ARM platforms to use SMC forwarding.
    <ul>
      <li>Note that this requires a kernel option to be set that right now is not
set by default on any ARM platforms in Microkit.</li>
    </ul>
  </li>
  <li>Allow tool to target Linux AArch64 hosts, also available as a pre-built SDK
starting in this release.</li>
  <li>Increase max PD name length to 64 characters (from 16).</li>
  <li>Add Nix flake for Nix users who want to build from source and not depend on
the pre-built SDK.</li>
  <li>Allow specifying whether a channel end can notify the other.</li>
  <li>Memory Regions now default to the largest possible page size for the MR’s size
and alignment of virtual addresses of its mappings.
    <ul>
      <li>This is transparent to users, but can lead to improved performance and
memory usage.</li>
    </ul>
  </li>
  <li>Utilise kernel API for naming threads in debug mode.
    <ul>
      <li>Helps debugging any kernel error prints in certain cases.</li>
    </ul>
  </li>
  <li>Monitor fault handling now prints if a virtual memory exception was likely due
to a PD stack overflow.</li>
  <li>Monitor fault handling now decodes user-exceptions likely caused by LLVM’s
UBSAN and prints appropriate debug output (only on AArch64).</li>
  <li>Add <code class="language-plaintext highlighter-rouge">setvar_size</code> attribute for MR mappings, similar to <code class="language-plaintext highlighter-rouge">setvar_vaddr</code>.</li>
  <li>Add a new ‘Internals’ section in the manual to document how the Microkit
actually works.</li>
  <li>libmicrokit APIs for notifying, IRQ acking and performing PPCs now print
errors when an invalid channel is used in debug mode.
    <ul>
      <li>Previously this lead to a kernel error print that was not that useful from
within a Microkit environment.</li>
    </ul>
  </li>
  <li>System images are now relocatable.
    <ul>
      <li>Previously they required loading at particular address within physical
memory, the Microkit loader will now relocate itself if loaded at a
different range of physical memory. This can make the boot-loading process
of Microkit images less fragile.</li>
    </ul>
  </li>
</ul>

<h3 id="bug-fixes">Bug fixes</h3>

<ul>
  <li>Allow mapping in ‘null’ page. Necessary for virtual machines with guest memory
that starts at guest physical address zero.</li>
  <li>More error checking for invalid mappings (e.g virtual address outside of valid
range).</li>
  <li>Re-add warning for unused memory regions.
    <ul>
      <li>This is a bug fix since it used to be part of the tool before it was rewritten.</li>
    </ul>
  </li>
  <li>Actually enforce the PPC priority rule that PPC is only allowed to PDs of higher
priority.
    <ul>
      <li>Note that to fix this in the tool, we had to introduce a breaking change
in the SDF. See upgrade notes for details.</li>
    </ul>
  </li>
  <li>Fix a bug with kernel boot emulation that would sometimes occur when using
the release mode of the kernel.</li>
  <li>Fix the GIC device addresses the loader was using for QEMU during
initialisation.</li>
  <li>Fixed a bug preventing allocating a MR at certain fixed physical addresses.</li>
  <li>Better error reporting when allocation of a memory region fails.</li>
  <li>Fix allocation of Scheduling Context objects, previously we were allocating
more than necessary.</li>
</ul>

<h3 id="board-support">Board support</h3>

<ul>
  <li>i.MX8MP-EVK</li>
  <li>Pine64 RockPro64</li>
  <li>Ariane (aka CVA6)</li>
  <li>Cheshire</li>
  <li>Raspberry Pi 4B</li>
</ul>

<h3 id="upgrade-notes">Upgrade notes</h3>

<p>There is a single breaking change in this release, it affects any
System Description Files (SDF) that make use of channels with PPCs.</p>

<p>This was done for two reasons:</p>

<ol>
  <li>It allows the tool to statically check and enforce the existing rule that a
PD that performs a PPC must be lower priority that the PD it is calling into.</li>
  <li>It allows finer granularity on the channel ends. For example, previously
all channels allowed notifies either way, now that decision is up to the
user. The default behaviour remains the same, both ends are allowed to
notify each other.</li>
</ol>

<p>To upgrade, follow these steps:</p>

<ol>
  <li>Remove the <code class="language-plaintext highlighter-rouge">pp</code> attribute from any PDs that have it.</li>
  <li>Go to each channel with the PD that had the <code class="language-plaintext highlighter-rouge">pp</code> attribute. Set <code class="language-plaintext highlighter-rouge">pp="true"</code>
on the end of the channel for the PD that is <em>performing</em> the PPC.</li>
</ol>

<p>Below is an example of upgrading a system that utilises PPCs.</p>

<p>From Microkit 1.4.1:</p>
<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;protection_domain</span> <span class="na">name=</span><span class="s">"server"</span> <span class="na">priority=</span><span class="s">"254"</span> <span class="na">pp=</span><span class="s">"true"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;program_image</span> <span class="na">path=</span><span class="s">"server.elf"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/protection_domain&gt;</span>
<span class="nt">&lt;protection_domain</span> <span class="na">name=</span><span class="s">"client"</span> <span class="na">priority=</span><span class="s">"1"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;program_image</span> <span class="na">path=</span><span class="s">"client.elf"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/protection_domain&gt;</span>
<span class="nt">&lt;channel&gt;</span>
    <span class="nt">&lt;end</span> <span class="na">pd=</span><span class="s">"server"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;end</span> <span class="na">pd=</span><span class="s">"client"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/channel&gt;</span>
</code></pre></div></div>

<p>To Microkit 2.0.0:</p>
<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;protection_domain</span> <span class="na">name=</span><span class="s">"server"</span> <span class="na">priority=</span><span class="s">"254"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;program_image</span> <span class="na">path=</span><span class="s">"server.elf"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/protection_domain&gt;</span>
<span class="nt">&lt;protection_domain</span> <span class="na">name=</span><span class="s">"client"</span> <span class="na">priority=</span><span class="s">"1"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;program_image</span> <span class="na">path=</span><span class="s">"client.elf"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/protection_domain&gt;</span>
<span class="nt">&lt;channel&gt;</span>
    <span class="nt">&lt;end</span> <span class="na">pd=</span><span class="s">"server"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;end</span> <span class="na">pd=</span><span class="s">"client"</span> <span class="na">pp=</span><span class="s">"true"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/channel&gt;</span>
</code></pre></div></div>

<p>Depending on your use-case you may also want to specify what end is allowed
to notify as well. For example, if the only communication between <code class="language-plaintext highlighter-rouge">server</code>
and <code class="language-plaintext highlighter-rouge">client</code> was PPC, you may want the channel to be the following:</p>
<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;channel&gt;</span>
    <span class="nt">&lt;end</span> <span class="na">pd=</span><span class="s">"server"</span> <span class="na">notify=</span><span class="s">"false"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;end</span> <span class="na">pd=</span><span class="s">"client"</span> <span class="na">notify=</span><span class="s">"false"</span> <span class="na">pp=</span><span class="s">"true"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/channel&gt;</span>
</code></pre></div></div>

<p>You can find all the details in the
<a href="https://github.com/seL4/microkit/blob/2.0.0/docs/manual.md#channel">channel section of the manual</a>.</p>

<h2 id="full-changelog">Full changelog</h2>

<p>Use <code class="language-plaintext highlighter-rouge">git log 1.4.1..2.0.0</code> in <a href="https://github.com/seL4/microkit/">https://github.com/seL4/microkit/</a></p>

<h2 id="more-details">More details</h2>

<p>See the <a href="https://github.com/seL4/microkit/blob/main/docs/manual.md">documentation</a>
or ask on the mailing list!</p>


  </div>







  
  
<div class="sidebar-toc hidden-xs hidden-sm col-md-3 col-lg-3">
  
    <ul class="section-nav">
    	<h2> Microkit </h2> 
        <li>
          
          <a style="" class="" href="/projects/microkit/">
            Documentation homepage
          </a>
        </li>













    
        <h3>Useful URLs</h3>
    
        <li>
          <a style="" class="" href="https://github.com/seL4/microkit/blob/main/docs/manual.md">
            Microkit user manual
          </a>
        </li>

    
        <li>
          <a style="" class="" href="https://trustworthy.systems/projects/microkit/tutorial">
            Microkit tutorial
          </a>
        </li>

    
        <li>
          <a style="" class="" href="https://github.com/seL4/microkit/issues/61">
            Microkit development roadmap
          </a>
        </li>

    
        <li>
          <a style="" class="" href="https://trustworthy.systems/projects/microkit">
            Trustworthy Systems Microkit project
          </a>
        </li>





    
        <h3>Repositories</h3>
    
        <li>
          <a class="" href="https://github.com/sel4/microkit">
            microkit
          </a>
        </li>

    
        <li>
          <a class="" href="https://github.com/au-ts/microkit_tutorial">
            microkit_tutorial
          </a>
        </li>









  
      
          <h3>Releases</h3>
      
          <li>
            <a style="" href="/releases/microkit/2.0.1.html">
              2.0.1
            </a>
          </li>
  
      
          <li>
            <a style=" font-weight: bold; " href="/releases/microkit/2.0.0.html">
              2.0.0
            </a>
          </li>
  
      
          <li>
            <a style="" href="/releases/microkit/1.4.1.html">
              1.4.1
            </a>
          </li>
  
      
          <li>
            <a style="" href="/releases/microkit/1.4.0.html">
              1.4.0
            </a>
          </li>
  
      
          <li>
            <a style="" href="/releases/microkit/1.3.0.html">
              1.3.0
            </a>
          </li>
  



<h3>SDK downloads</h3>
  
    <h4>2.0.1</h4>
    
      <li>
          <a href="https://github.com/seL4/microkit/releases/download/2.0.1/microkit-sdk-2.0.1-linux-x86-64.tar.gz">
              microkit-sdk-2.0.1-linux-x86-64.tar.gz
            </a>
      </li>
    
      <li>
          <a href="https://github.com/seL4/microkit/releases/download/2.0.1/microkit-sdk-2.0.1-linux-aarch64.tar.gz">
              microkit-sdk-2.0.1-linux-aarch64.tar.gz
            </a>
      </li>
    
      <li>
          <a href="https://github.com/seL4/microkit/releases/download/2.0.1/microkit-sdk-2.0.1-macos-x86-64.tar.gz">
              microkit-sdk-2.0.1-macos-x86-64.tar.gz
            </a>
      </li>
    
      <li>
          <a href="https://github.com/seL4/microkit/releases/download/2.0.1/microkit-sdk-2.0.1-macos-aarch64.tar.gz">
              microkit-sdk-2.0.1-macos-aarch64.tar.gz
            </a>
      </li>
    
  
    <h4>2.0.0</h4>
    
      <li>
          <a href="https://github.com/seL4/microkit/releases/download/2.0.0/microkit-sdk-2.0.0-linux-x86-64.tar.gz">
              microkit-sdk-2.0.0-linux-x86-64.tar.gz
            </a>
      </li>
    
      <li>
          <a href="https://github.com/seL4/microkit/releases/download/2.0.0/microkit-sdk-2.0.0-linux-aarch64.tar.gz">
              microkit-sdk-2.0.0-linux-aarch64.tar.gz
            </a>
      </li>
    
      <li>
          <a href="https://github.com/seL4/microkit/releases/download/2.0.0/microkit-sdk-2.0.0-macos-x86-64.tar.gz">
              microkit-sdk-2.0.0-macos-x86-64.tar.gz
            </a>
      </li>
    
      <li>
          <a href="https://github.com/seL4/microkit/releases/download/2.0.0/microkit-sdk-2.0.0-macos-aarch64.tar.gz">
              microkit-sdk-2.0.0-macos-aarch64.tar.gz
            </a>
      </li>
    
  
    <h4>1.4.1</h4>
    
      <li>
          <a href="https://github.com/seL4/microkit/releases/download/1.4.1/microkit-sdk-1.4.1-linux-x86-64.tar.gz">
              microkit-sdk-1.4.1-linux-x86-64.tar.gz
            </a>
      </li>
    
      <li>
          <a href="https://github.com/seL4/microkit/releases/download/1.4.1/microkit-sdk-1.4.1-macos-x86-64.tar.gz">
              microkit-sdk-1.4.1-macos-x86-64.tar.gz
            </a>
      </li>
    
      <li>
          <a href="https://github.com/seL4/microkit/releases/download/1.4.1/microkit-sdk-1.4.1-macos-aarch64.tar.gz">
              microkit-sdk-1.4.1-macos-aarch64.tar.gz
            </a>
      </li>
    
  
    <h4>1.4.0</h4>
    
      <li>
          <a href="https://github.com/seL4/microkit/releases/download/1.4.0/microkit-sdk-1.4.0-linux-x86-64.tar.gz">
              microkit-sdk-1.4.0-linux-x86-64.tar.gz
            </a>
      </li>
    
      <li>
          <a href="https://github.com/seL4/microkit/releases/download/1.4.0/microkit-sdk-1.4.0-macos-x86-64.tar.gz">
              microkit-sdk-1.4.0-macos-x86-64.tar.gz
            </a>
      </li>
    
      <li>
          <a href="https://github.com/seL4/microkit/releases/download/1.4.0/microkit-sdk-1.4.0-macos-aarch64.tar.gz">
              microkit-sdk-1.4.0-macos-aarch64.tar.gz
            </a>
      </li>
    
  
    <h4>1.3.0</h4>
    
      <li>
          <a href="https://github.com/seL4/microkit/releases/download/1.3.0/microkit-sdk-1.3.0-linux-x86-64.tar.gz">
              microkit-sdk-1.3.0-linux-x86-64.tar.gz
            </a>
      </li>
    
      <li>
          <a href="https://github.com/seL4/microkit/releases/download/1.3.0/microkit-sdk-1.3.0-macos-x86-64.tar.gz">
              microkit-sdk-1.3.0-macos-x86-64.tar.gz
            </a>
      </li>
    
      <li>
          <a href="https://github.com/seL4/microkit/releases/download/1.3.0/microkit-sdk-1.3.0-macos-aarch64.tar.gz">
              microkit-sdk-1.3.0-macos-aarch64.tar.gz
            </a>
      </li>
    
  





    </ul>

</div>


</div>

    </main>
    


<footer class="site-footer">

  <h2 class="footer-heading">seL4 docs</h2>

  <div class="footer-col-wrapper">

    <div class="col-md-2">
      



<ul class="social-media-list">
  <li><a href="https://github.com/sel4"><i class="fab fa-github"></i> <span class="username">sel4</span></a></li><li><a href="https://github.com/sel4proj"><i class="fab fa-github"></i> <span class="username">sel4proj</span></a></li>
</ul>

    </div>

    <div class="col-md-8">
      <ul class="list-unstyled">
        <li>
          This site is for displaying seL4 related documentation.  Pull requests are welcome.
        </li>
        
          <li>
            Site last updated: Fri Mar 21 13:54:21 2025 +1100 f107c6afef
          </li>
          <li>
          </li>
        
      </ul>
    </div>
    <div class="col-md-2">
<a href="https://github.com/seL4/docs/blob/master/content_collections/_releases/microkit/2.0.0.md">View page on GitHub</a>
      <br />
      <a href="https://github.com/seL4/docs/edit/master/content_collections/_releases/microkit/2.0.0.md">Edit page on GitHub</a>
      <br />
      <a href="/sitemap">Sitemap</a>
    </div>

  </div>

</footer>

  </body>
</html>
