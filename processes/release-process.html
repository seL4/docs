<!DOCTYPE html>
<!--
     SPDX-License-Identifier: CC-BY-SA-4.0
     SPDX-FileCopyrightText: 2020 seL4 Project a Series of LF Projects, LLC.
-->
<!-- Page last generated 2022-01-29 03:17:13 +0000 -->
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Release Process | seL4 docs</title>

    <!-- Our stylesheet and theme stylesheet.  Contains bootstrap. -->
    <link rel="stylesheet" href="/assets/css/style.css" type="text/css">
    <!-- Font awesome -->
    <link href="https://use.fontawesome.com/releases/v5.0.8/css/all.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
    <!-- Pygments syntax highlighting  -->
    <link rel="stylesheet" href="/assets/css/highlighting/trac.css" type="text/css">
    <link rel="icon" type="image/x-icon" href="/assets/favicon.ico">
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-117737473-2"></script>
<script>
  if((window.doNotTrack === "1" || navigator.doNotTrack === "1" || navigator.doNotTrack === "yes" || navigator.msDoNotTrack === "1")) {
    window['ga-disable-UA-117737473-2'] = true;
  }
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-117737473-2');
</script>
</head>

  <body class="container-fluid">

    



<header>
  <ul class="row menu">
    <li class="col-xs-12 col-md-2" >
            <a href="https://sel4.systems" class="skip-icon">
              <img class="img-responsive" src="/assets/logo-text-white.svg" alt="seL4 logo" />
            </a>
    </li>
    <li class="col-xs-12 col-md-10 menu">
      <nav aria-label="Banner links">
        <h2><a href="/GettingStarted">Getting Started</a></h2>
        <h2><a href="/processes">Contributing</a></h2>
        <h2><a href="/projects">Projects</a></h2>
        <h2><a href="/Tutorials">Tutorials</a></h2>
        <iframe title="DuckDuckGo search bar" src="https://duckduckgo.com/search.html?site=docs.sel4.systems&prefill=Search%20sel4.systems" style="overflow:hidden;margin-bottom:10px; padding:0;height:40px;float:right;border-width: 0px"></iframe>
      </nav>
    </li>
  </ul>
  <div class="clear"></div>
  
<div class="breadcrumbs bootstrap hidden-sm-down">
  <nav class="sel-breadcrumb" aria-label="Breadcrumb" >
    <ol class=" list-unstyled" vocab="http://schema.org/" typeof="BreadcrumbList">
      
      
        

        

        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
            <a property="item" typeof="WebPage" href="/">
              <span property="name"><b>seL4 Docs</b></span>
            </a>
            <meta property="position" content="1" />
        </li>
      
        

        

        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
            <a property="item" typeof="WebPage" href="/processes/">
              <span property="name"><b>Processes</b></span>
            </a>
            <meta property="position" content="2" />
        </li>
      
        

        
          <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
            <span property="name">Release Process</span>
            <meta property="position" content="3" /></li>
          
    </ol>
  </nav>
  <nav class="sel-version" aria-label="Current Versions">
    <ol class="list-unstyled">
      <li class="list-unstyled text-right" style="margin-left:auto; padding:0rem 0rem;">
        Current versions:</li>
      <li class="list-unstyled text-right">
      <a href="/releases/sel4/12.1.0"><b>seL4-12.1.0</b></a></li>
      <li class="list-unstyled text-right">
      <a href="/releases/camkes/camkes-3.10.0"><b>camkes-3.10.0</b></a></li>
      <li class="list-unstyled text-right">
      <a href="/releases/capdl/0.2.1"><b>CapDL-0.2.1</b></a></li>
    </ol>
  </nav>
  <nav class="sel-version">
    <ol class="list-unstyled">
      <li class="list-unstyled text-center">
      <a href="https://sel4.discourse.group/t/15-june-2021-release/373"><b>Announcing new releases: </b></a></li>
    </ol>
  </nav>
  <div class='clear'></div>
</div>


</header>

    <main>
      <div class="row">
  <div class="hidden-xs col-sm-4 col-md-3 col-lg-2">
    


<div class="sidebar">






      <ul class="nav nav-sidebar">
  
        <li class="">
          <a class="" href="/processes/conduct.html">
            Code of Conduct
          </a>
        </li>
  
        <li class="">
          <a class="" href="/processes/contributing.html">
            Contributing
          </a>
        </li>
  
        <li class="">
          <a class="" href="/processes/style-guide.html">
            Style Guide
          </a>
        </li>
  
        <li class="">
          <a class="" href="/processes/git-conventions.html">
            Git Conventions
          </a>
        </li>
  
        <li class="">
          <a class="" href="/processes/code-review.html">
            Pull requests
          </a>
        </li>
  
        <li class="active">
          <a class="" href="/processes/release-process.html">
            Release process
          </a>
        </li>
  
        <li class="">
          <a class="" href="/processes/rfc-process.html">
            RFC process
          </a>
        </li>
  
        <li class="">
          <a class="" href="/processes/websites.html">
            Websites
          </a>
        </li>
  
        <li class="">
          <a class="" href="/processes/emails.html">
            Emails
          </a>
        </li>
  
        <li class="">
          <a class="" href="/MaintainedRepositories.html">
            Maintained Repositories
          </a>
        </li>
  
      </ul>













</div>


  </div>
  <div class="col-sm-8 col-md-9 col-lg-8 main">
    
      <nav aria-label="Table of Contents">
        <ul class="section-nav">
<li class="toc-entry toc-h2"><a href="#terminology">Terminology</a></li>
<li class="toc-entry toc-h2"><a href="#sources">Sources</a></li>
<li class="toc-entry toc-h2"><a href="#releases">Releases</a>
<ul>
<li class="toc-entry toc-h3"><a href="#which-release-should-you-use">Which release should you use?</a></li>
<li class="toc-entry toc-h3"><a href="#version-numbers">Version Numbers</a></li>
<li class="toc-entry toc-h3"><a href="#library-compatibility">Library Compatibility</a></li>
<li class="toc-entry toc-h3"><a href="#legacy-support">Legacy support</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#manifests">Manifests</a>
<ul>
<li class="toc-entry toc-h3"><a href="#proofsverification-manifests">Proofs/Verification manifests</a></li>
<li class="toc-entry toc-h3"><a href="#versioned-manifests">Versioned manifests</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#release-procedure">Release procedure</a>
<ul>
<li class="toc-entry toc-h3"><a href="#release-window-and-freeze">Release window and freeze</a></li>
<li class="toc-entry toc-h3"><a href="#preparing-changelogs">Preparing changelogs</a></li>
<li class="toc-entry toc-h3"><a href="#verification">Verification</a></li>
<li class="toc-entry toc-h3"><a href="#release">Release</a></li>
<li class="toc-entry toc-h3"><a href="#post-release">Post release</a></li>
</ul>
</li>
</ul>
      </nav>
    
    <div class="content">
      <h1 id="release-process">Release Process</h1>

<p>This page outlines how we make <a href="/MaintainedRepositories">seL4 and its associated ecosystem</a> available to external developers. The goals of this process are as follows:</p>

<ul>
  <li>provide a current up to date version of our libraries and applications,</li>
  <li>allow developers to decide when to upgrade between versions, i.e choose when breakage happens,</li>
  <li>and provide libraries and apps compatible with each released version.</li>
</ul>

<p>Currently, we do not guarantee maintenance of previous releases, or individually version libraries,
projects and applications.</p>

<h2 id="terminology">Terminology</h2>

<ul>
  <li>Sources: source code for everything</li>
  <li>Kernel: the seL4 microkernel source repository</li>
  <li>Libraries: user level libraries that run on seL4</li>
  <li>Applications: applications that run on seL4</li>
  <li>Projects: a collection of applications, libraries, kernel, denoted by a repo manifest</li>
  <li>CAmkES: the CAmkES tool repository</li>
  <li>Proofs: the formal proofs about seL4 in the l4v repository.</li>
</ul>

<h2 id="sources">Sources</h2>

<p>We make a lot of source code available in the spirit of open source,
however we do not guarantee that all source provided is
maintained and tested.</p>

<p>A list of maintained projects, libraries and applications can be found <a href="/MaintainedRepositories">here</a>.</p>

<h2 id="releases">Releases</h2>

<p>We have two release channels:</p>

<ul>
  <li><strong>Bleeding edge</strong>: These happen whenever any of our maintained project code is updated and the tests for it are passing</li>
  <li><strong>Versioned releases</strong>: Versioned releases of the kernel and the CAmkES tool.  These happen less frequently.</li>
</ul>

<p>Bleeding edge releases happen every time the code is updated and it passes the test suites and
proofs. Working on the bleeding edge means that API changes occur often, and you may get cut. Whenever any of the sources tracked by the manifests in the following repositories are updated and the
regression tests pass, an updated version of the corresponding <code class="highlighter-rouge">default.xml</code> manifest will automatically be committed to the repo indicating which version combination is confirmed to work.</p>

<h3 id="which-release-should-you-use">Which release should you use?</h3>

<p>We recommend you develop on a specific version of the kernel, rather
than the bleeding edge which is the tip of master. Each MAJOR.MINOR
release has release notes which describe changes and specific upgrade
notes, posted <a href="/sel4_release">here</a>.</p>

<p>New features and bug fixes will appear in bleeding edge updates earlier than in
a released version.  If you are working on a long-term project on seL4 or are
using a different user level than we provide then it is probably better to pick
a versioned release and manually upgrade when new features are required.  We
only guarantee working proofs for released versions, although we try to maintain
working proofs for bleeding edge releases as well. If you are trying out seL4
and experimenting with different features, rerunning benchmarks or doing the
tutorials, using the bleeding edge versions of the projects is probably fine.
They don’t get updated unless they are passing our tests and any issues should
be reported to the relevant GitHub issue tracker or posted on the
<a href="https://lists.sel4.systems/postorius/lists/devel.sel4.systems/">mailing list</a> or <a href="https://sel4.discourse.group">discourse</a>.</p>

<h3 id="version-numbers">Version Numbers</h3>

<p>For versioned releases, seL4 and CAmkES/capDL have different policies.</p>

<p><strong>seL4</strong> follows <a href="http://semver.org/">semantic versioning</a>. In
short:</p>

<p>“Given a version number MAJOR.MINOR.PATCH, increment the:</p>

<ul>
  <li>MAJOR version when you make incompatible API changes,</li>
  <li>MINOR version when you add functionality in a backwards-compatible
    manner, and</li>
  <li>PATCH version when you make backwards-compatible bug fixes.”</li>
</ul>

<p>seL4 versions are tagged in git.</p>

<p><strong>CAmkES</strong> and <strong>capDL</strong> versions follow the following policy:</p>

<p>MAJOR.MINOR.PATCH:</p>

<ul>
  <li>MAJOR: A big rewrite</li>
  <li>MINOR: The actual release number, increased when seL4 is released or there are source/binary incompatible CAmkES updates</li>
  <li>PATCH: Small bug fixes that are backwards compatible.</li>
</ul>

<h3 id="library-compatibility">Library Compatibility</h3>

<p>seL4 libraries have branches that track all MAJOR.MINOR versions, with
branch names in the format MAJOR.MINOR-compatible. A
MAJOR.MINOR-compatible branch will build with any MAJOR.MINOR.* version
of the kernel, and all MAJOR.MINOR-compatible branches across our
libraries are compatible with each other.</p>

<h3 id="legacy-support">Legacy support</h3>

<p>We only currently provide bug fixes and support for the latest version
of the kernel and latest version of libraries.</p>

<h2 id="manifests">Manifests</h2>

<p>Each project repository above contains several manifest files:</p>

<ul>
  <li><code class="highlighter-rouge">default.xml</code> specifies pinned revisions of the source that are updated every time a new <em>bleeding
edge</em> release is pushed. These manifests should always compile and pass tests if the correct build
configurations are used.</li>
  <li><code class="highlighter-rouge">master.xml</code> specifies the tip of each repository in a project. These aren’t guaranteed to work, and may contain combinations of repositories that have not been tested together.</li>
</ul>

<p><code class="highlighter-rouge">default.xml</code> is tagged at each released version. To obtain the manifest for a specific kernel
version checkout the corresponding X.Y.z tag. Our previous process created an <code class="highlighter-rouge">X.Y.z.xml</code> manifest
for each release, but this is no longer the case.</p>

<h3 id="proofsverification-manifests">Proofs/Verification manifests</h3>

<p>The verification-manifest project contains a <code class="highlighter-rouge">${SEL4_VERSION}.xml</code> containing revisions which correspond to a version of the proofs that pass for the released version of the kernel</p>

<h3 id="versioned-manifests">Versioned manifests</h3>

<p>The following projects manifest repositories are maintained, meaning both bleeding edge and
versioned releases are available:</p>

<ul>
  <li>
    <p><a href="https://github.com/seL4/sel4test-manifest">sel4test-manifest</a></p>
  </li>
  <li>
    <p><a href="https://github.com/seL4/sel4bench-manifest">sel4bench-manifest</a></p>
  </li>
  <li>
    <p><a href="https://github.com/seL4/camkes-manifest">camkes-manifest</a></p>
  </li>
  <li>
    <p><a href="https://github.com/seL4/camkes-vm-examples-manifest">camkes-vm-examples-manifest</a></p>
  </li>
  <li>
    <p><a href="https://github.com/seL4/sel4webserver-manifest">sel4webserver-manifest</a></p>
  </li>
  <li>
    <p><a href="https://github.com/seL4/sel4-tutorials-manifest">sel4-tutorials-manifest</a></p>
  </li>
  <li>
    <p><a href="https://github.com/seL4/rumprun-sel4-demoapps">rumprun-sel4-demoapps</a></p>
  </li>
  <li>
    <p><a href="https://github.com/seL4/verification-manifest">verification-manifest</a></p>
  </li>
</ul>

<h2 id="release-procedure">Release procedure</h2>

<p>This section describes how a release is done, and is mostly a checklist for
the person performing a versioned release.</p>

<h3 id="release-window-and-freeze">Release window and freeze</h3>

<p>When a release is planned, decide on the timeframe of the release window in
which changes can still be made, and then make an announcement to the relevant
channels that a release is coming up and let people know of the release window
that you have decided. This is to give advance notice to contributors so that
they can prepare for the release and get features merged in before the release
is done. A decent timeframe for the release window is a month.</p>

<p>The relevant channels for the announcement are:</p>

<ul>
  <li><a href="https://sel4.discourse.group">seL4 discourse</a></li>
  <li><a href="https://lists.sel4.systems/postorius/lists/announce.sel4.systems/">seL4 announcement mailing list</a></li>
  <li><a href="https://mattermost.trustworthy.systems/sel4-external/">seL4 Mattermost</a></li>
</ul>

<p>Upon the end of the release window, announce the close of the window and the
start of the release freeze on the relevant channels. Pull requests should not
be merged during the release freeze except for those that fix issues and bugs
that occurred during the release window. Work towards getting the continuous
integration builds to be green while working on the next step.</p>

<h3 id="preparing-changelogs">Preparing changelogs</h3>

<p>Before preparing the changelogs for each project, review the changes of each
project since the last release and decide a new version number as according to
the <a href="#version-numbers">Version Numbers</a> section.</p>

<p>Clone the <code class="highlighter-rouge">seL4_release</code> repository from the <a href="https://github.com/seL4">seL4
organisation</a> (this is currently private and you will
need to ask for access).</p>

<p>Move to the directory of the repository that you cloned and execute the
following while replacing the fields:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./releaseit prerelease <span class="nt">--config</span> data/sel4_prerelease.yml <span class="nt">--new-version</span><span class="o">=</span>&lt;new seL4 version&gt;

./releaseit prerelease <span class="nt">--config</span> data/capdl_prerelease.yml <span class="nt">--new-version</span><span class="o">=</span>&lt;new capDL version&gt; <span class="nt">--sel4-version</span><span class="o">=</span>&lt;new seL4 version&gt;

./releaseit prerelease <span class="nt">--config</span> data/camkes_prerelease.yml <span class="nt">--new-version</span><span class="o">=</span>camkes-&lt;new CAmkES version&gt; <span class="nt">--sel4-version</span><span class="o">=</span>&lt;new seL4 version&gt;
</code></pre></div></div>

<p>These commands clone the projects in the <code class="highlighter-rouge">/tmp</code> directory of your machine and
apply two commits that add changes to the <code class="highlighter-rouge">CHANGES</code> and <code class="highlighter-rouge">VERSION</code> files. Note
that it also creates a <code class="highlighter-rouge">&lt;project&gt;_release.md</code> file in each project directory.
You now need to add any extra changes since the last release that were not
already included in the <code class="highlighter-rouge">CHANGES</code> file for each project. To do so, run <code class="highlighter-rouge">git log</code>
with the relevant arguments to get the commits since the last release or go to
each project’s GitHub page and filter the pull requests that were merged since
the last release. Go through each of the commits/pull requests and summarise
them in the <code class="highlighter-rouge">CHANGES</code> files. You do not need to add changes that are trivial. The
best way to think about this is: “If I’m a user of (seL4, CAmkES, capDL) will
it affect me? Do I need to know about it, e.g has the API changed?  Are
variables renamed? New features? New licences? Removal of features?” etc. Make
sure to also update the <code class="highlighter-rouge">Upgrade Notes</code> section in each <code class="highlighter-rouge">CHANGES</code> file.</p>

<p>Meanwhile, you can also work on making sure the continuous integration builds
are green while preparing the changelogs. Remember to also include any fixes and
changes from this process to the changelogs.</p>

<h3 id="verification">Verification</h3>

<p>Coordinate with the verification team to make a simultaneous release of the
verification repositories. If the proof builds are green, this should be a
relatively short process. If the proof builds are not green, the release must
wait until those are fixed.</p>

<h3 id="release">Release</h3>

<p>Once the continuous integration builds are all green (make sure that the
verification builds are also green) and the changelogs are also done, amend the
commits that the release tool made with the updated <code class="highlighter-rouge">CHANGES</code> file in each
project, sign the commits off and submit pull requests for each project.  Make
sure that the pull request <strong>only</strong> contains the two commits, one for updating
the <code class="highlighter-rouge">VERSION</code> and the <code class="highlighter-rouge">CHANGES</code> files to the latest version and one for
updating the <code class="highlighter-rouge">VERSION</code> file to add the <code class="highlighter-rouge">dev</code> suffix to the contents.</p>

<p>The next step is to copy the contents of each project’s <code class="highlighter-rouge">CHANGES</code> file to the
<code class="highlighter-rouge">&lt;project&gt;_release.md</code> file in the same directory. Make sure that the top of
the <code class="highlighter-rouge">&lt;project&gt;_release.md</code> file contains a <code class="highlighter-rouge">project: sel4</code>, <code class="highlighter-rouge">project: camkes</code>,
or <code class="highlighter-rouge">project: capdl</code> tag. Take all of the <code class="highlighter-rouge">&lt;project&gt;_release.md</code> files and
rename them to the current release version and add them under the <code class="highlighter-rouge">_releases</code>
folder in the docsite’s repository
<a href="https://github.com/seL4/docs/tree/master/content_collections/_releases">here</a>.
Submit a pull request for those changes as well.</p>

<p>Get all pull requests (should be four, one for each project, and one for the
docsite) merged and then wait for GitHub to release the version tags for each
project. Once this is done, we can now carry out the
last remaining tasks and announce the release.</p>

<h3 id="post-release">Post release</h3>

<p>Update the links on the docsite to point to the new releases by updating the
version numbers in this
<a href="https://github.com/seL4/docs/blob/master/_config.yml">file</a>.</p>

<p>Announce on the mailing list as well as the seL4 Discourse that the new release
is done. Update the line in this <a href="_includes/custom-navbar.html">file</a> to point
to the seL4 Discourse announcement.</p>

<p>Build a new version of the seL4 kernel manual and add it
<a href="https://github.com/seL4/website/tree/master/content/Info/Docs">here</a> and
update the symlink to point to it.</p>

<p>Finally, go to the release tool and run the following command while replacing
the fields:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./releaseit postrelease <span class="nt">--sel4-new-version</span><span class="o">=</span>&lt;new seL4 version&gt; <span class="nt">--camkes-new-version</span><span class="o">=</span>&lt;new CAmkES version&gt; <span class="nt">--capdl-new-version</span><span class="o">=</span>&lt;new capDL version&gt;
</code></pre></div></div>

<p>This command will add version tags to each sub-project repository for each of
the repositories that are under those projects. Running it without the
<code class="highlighter-rouge">--release</code> flag will perform a dry-run. If there are issues during the dry-run,
fix them up and when everything is all good, run it with the <code class="highlighter-rouge">--release</code> flag.</p>

<p>Now, the final task to do it to go to the GitHub pages for the seL4, CAmkES,
and capDL projects and draft new GitHub releases for each of the projects.</p>

<p>Once you’re here, hurray the release is done!</p>

    </div>
  </div>
</div>

    </main>
    


<footer class="site-footer">

  <h2 class="footer-heading">seL4 docs</h2>

  <div class="footer-col-wrapper">

    <div class="col-md-2">
      



<ul class="social-media-list">
  <li><a href="https://github.com/sel4"><i class="fab fa-github"></i> <span class="username">sel4</span></a></li><li><a href="https://github.com/sel4proj"><i class="fab fa-github"></i> <span class="username">sel4proj</span></a></li>
</ul>

    </div>

    <div class="col-md-8">
      <ul class="list-unstyled">
        <li>
          This site is for displaying seL4 related documentation.  Pull requests are welcome.
        </li>
        
          <li>
            Site last updated: Thu Jan 27 20:08:19 2022 +1100 8274e01
          </li>
          <li>
                Page last updated: Thu Jan 27 20:08:19 2022 +1100 8274e01
          </li>
        
      </ul>
    </div>
    <div class="col-md-2">
<a href="https://github.com/seL4/docs/blob/master/processes/release-process.md">View page on GitHub</a>
      <br />
      <a href="https://github.com/seL4/docs/edit/master/processes/release-process.md">Edit page on GitHub</a>
      <br />
      <a href="/sitemap">Sitemap</a>
    </div>

  </div>

</footer>

  </body>
</html>
