<!DOCTYPE html>
<!--
     SPDX-License-Identifier: CC-BY-SA-4.0
     SPDX-FileCopyrightText: 2020 seL4 Project a Series of LF Projects, LLC.
-->
<!-- Page last generated 2023-06-29 03:30:08 +0000 -->
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>CapDL | seL4 docs</title>

    <!-- Our stylesheet and theme stylesheet.  Contains bootstrap. -->
    <link rel="stylesheet" href="/assets/css/style.css" type="text/css">
    <!-- Font awesome -->
    <link href="https://use.fontawesome.com/releases/v5.0.8/css/all.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
    <!-- Pygments syntax highlighting  -->
    <link rel="stylesheet" href="/assets/css/highlighting/trac.css" type="text/css">
    <link rel="icon" type="image/x-icon" href="/assets/favicon.ico">
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-117737473-2"></script>
<script>
  if((window.doNotTrack === "1" || navigator.doNotTrack === "1" || navigator.doNotTrack === "yes" || navigator.msDoNotTrack === "1")) {
    window['ga-disable-UA-117737473-2'] = true;
  }
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-117737473-2');
</script>
</head>

  <body class="container-fluid">

    



<header>
  <ul class="row menu">
    <li class="col-xs-12 col-md-2" >
            <a href="https://sel4.systems" class="skip-icon">
              <img class="img-responsive" src="/assets/logo-text-white.svg" alt="seL4 logo" />
            </a>
    </li>
    <li class="col-xs-12 col-md-10 menu">
      <nav aria-label="Banner links">
        <h2><a href="/GettingStarted">Getting Started</a></h2>
        <h2><a href="/processes">Contributing</a></h2>
        <h2><a href="/projects">Projects</a></h2>
        <h2><a href="/Tutorials">Tutorials</a></h2>
        <iframe title="DuckDuckGo search bar" src="https://duckduckgo.com/search.html?site=docs.sel4.systems&prefill=Search%20sel4.systems" style="overflow:hidden;margin-bottom:10px; padding:0;height:40px;float:right;border-width: 0px"></iframe>
      </nav>
    </li>
  </ul>
  <div class="clear"></div>
  
<div class="breadcrumbs bootstrap hidden-sm-down">
  <nav class="sel-breadcrumb" aria-label="Breadcrumb" >
    <ol class=" list-unstyled" vocab="http://schema.org/" typeof="BreadcrumbList">
      
      
        

        

        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
            <a property="item" typeof="WebPage" href="/">
              <span property="name"><b>seL4 Docs</b></span>
            </a>
            <meta property="position" content="1" />
        </li>
      
        

        

        <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
            <a property="item" typeof="WebPage" href="/projects/">
              <span property="name"><b>Projects</b></span>
            </a>
            <meta property="position" content="2" />
        </li>
      
        

        
          <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
            <span property="name">CapDL</span>
            <meta property="position" content="3" /></li>
          
    </ol>
  </nav>
  <nav class="sel-version" aria-label="Current Versions">
    <ol class="list-unstyled">
      <li class="list-unstyled text-right" style="margin-left:auto; padding:0rem 0rem;">
        Current versions:</li>
      <li class="list-unstyled text-right">
      <a href="/releases/sel4/12.1.0"><b>seL4-12.1.0</b></a></li>
      <li class="list-unstyled text-right">
      <a href="/releases/camkes/camkes-3.10.0"><b>camkes-3.10.0</b></a></li>
      <li class="list-unstyled text-right">
      <a href="/releases/capdl/0.2.1"><b>CapDL-0.2.1</b></a></li>
    </ol>
  </nav>
  <nav class="sel-version">
    <ol class="list-unstyled">
      <li class="list-unstyled text-center">
      <a href="https://sel4.discourse.group/t/15-june-2021-release/373"><b>Announcing new releases: </b></a></li>
    </ol>
  </nav>
  <div class='clear'></div>
</div>


</header>

    <main>
      <div class="row">
  <div class="hidden-xs col-sm-4 col-md-3 col-lg-2">
    


<div class="sidebar">















    <ul class="nav nav-sidebar">
  
    
    

    
        <li class="">
            <a class="" href="/projects/sel4/">seL4</a>
        <li>
  
    
    

    
        <li class="">
            <a class="" href="/projects/l4v/">L4.verified</a>
        <li>
  
    
    

    
        <li class="">
            <a class="" href="/projects/camkes/">CAmkES</a>
        <li>
  
    
    

    
        <li class="active">
            <a class="" href="/projects/capdl/">CapDL</a>
        <li>
  
    
    

    
        <li class="">
            <a class="" href="/projects/elfloader/">Elfloader</a>
        <li>
  
    
    

    
        <li class="">
            <a class="" href="/projects/buildsystem/">seL4 Buildsystem</a>
        <li>
  
    
    

    
        <li class="">
            <a class="" href="/projects/user_libs/">user_libs</a>
        <li>
  
    
    

    
        <li class="">
            <a class="" href="/projects/sel4runtime/">The seL4 run-time</a>
        <li>
  
    
    

    
        <li class="">
            <a class="" href="/projects/sel4-tutorials/">seL4 tutorials</a>
        <li>
  
    
    

    
        <li class="">
            <a class="" href="/projects/sel4test/">seL4Test</a>
        <li>
  
    
    

    
        <li class="">
            <a class="" href="/projects/sel4webserver/">seL4webserver</a>
        <li>
  
    
    

    
        <li class="">
            <a class="" href="/projects/sel4bench/">sel4bench</a>
        <li>
  
    
    

    
        <li class="">
            <a class="" href="/projects/camkes-vm/">camkes-vm</a>
        <li>
  
    
    

    
        <li class="">
            <a class="" href="/projects/virtualization/">Virtualization</a>
        <li>
  
    
    

    
        <li class="">
            <a class="" href="/projects/dockerfiles/">Dockerfiles</a>
        <li>
  
    
    

    
        <li class="">
            <a class="" href="/projects/docsite/">seL4 Documentation website</a>
        <li>
  
    
    

    
        <li class="">
            <a class="" href="/projects/sel4_tools/">seL4_tools</a>
        <li>
  
    
    

    
        <li class="">
            <a class="" href="/projects/hardware_hacks/">Hardware Hacks</a>
        <li>
  
    
    

    
        <li class="">
            <a class="" href="/projects/rust/">Rust</a>
        <li>
  
    </ul>




</div>


  </div>
  <div class="content col-sm-8 col-md-6 col-lg-7 main">
    <h1 id="capdl">CapDL</h1>

<p>CapDL is the “Capability Distribution Language”. It’s used to describe
the kernel objects a seL4 application needs, and how capabilities to
those objects will be distributed.</p>

<p>All CapDL-related projects are in this repo:
<a href="https://github.com/sel4/capdl">https://github.com/sel4/capdl</a></p>

<h2 id="example-spec">Example Spec</h2>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>arch ia32

objects {

  my_tcb = tcb 
  my_cnode = cnode (3 bits)
  my_frame = frame (4k, paddr: 0x12345000) // paddr is optional
  my_page_table = pt
  my_page_directory = pd

}

caps {

  // Specify cap addresses (ie. CPtrs) in cnodes. 
  my_cnode { 
    1: my_tcb
    2: my_frame
    3: my_page_table
    4: my_page_directory
  }
 
  // Specify address space layout.
  // With 4gb page directories, 4mb page tables, and 4kb frames,
  // the frame at paddr 0x12345000 will be mapped at vaddr 0xABCDE000.
  my_pd {
    0x2AF: my_pt
  }
  my_pt { 
    0xDE: my_frame
  }
 
  // Specify root cnode and root paging structure of thread.
  my_tcb {
    vspace: my_pd
    cspace: my_cnode
  }

}
</code></pre></div></div>

<h2 id="capdl-translator-capdl-tool-readme">CapDL Translator (capDL-tool) [<a href="translator">Readme</a>]</h2>

<p>This program transforms a CapDL spec into several formats:</p>

<ul>
  <li>a C file for linking against the CapDL Loader to create a
      program that instantiates the system described by the spec</li>
  <li>a dot file for visualization with graphviz</li>
  <li>an XML file for further manipulation</li>
  <li>an isabelle model for use in proofs about the system described
      by the spec</li>
</ul>

<h2 id="capdl-loader-capdl-loader-app-readme">CapDL Loader (capdl-loader-app) [<a href="c-loader-app">Readme</a>]</h2>

<p>The CapDL Loader is a program that initializes the seL4 user-level
environment to match the system described by a CapDL spec, and loads
programs from ELFs in a provided cpio archive. It’s intended to be run
as the root task (ie. first user-level thread with access to all
resources).</p>

<p>The CapDL Loader must be linked against a CapDL spec - the C output of
the CapDL Translator. It must also be linked against a cpio archive
containing ELF images. It creates objects and distributes caps as per
the spec (if enough resources are available), and then loads programs
into memory at locations specified by the spec. Finally, it starts all
the threads it created and sleeps forever.</p>

<h2 id="python-capdl-library-python-capdl-tool-readme">Python CapDL Library (python-capdl-tool) [<a href="python-tool">Readme</a>]</h2>

<p>This library allows one to build up an in-memory database storing the
same information as a capdl spec. This is useful as it allows capdl
specs to be generated programmatically, and allows the programmer to
incrementally add information about kernel objects and capability
distribution. This library is used by <a href="/CAmkES/">CAmkES</a> to build up a spec
describing the entire system (all components and connections).</p>

<h2 id="cmake-libsel4-object-size-yaml-generation-target-readme">CMake libsel4 object size yaml generation target [<a href="object-sizes">Readme</a>]</h2>

<p>This is a CMake target that generates a yaml file containing seL4 object-size
and other constant definitions that have been extracted from the libsel4
preprocessor macro definitions.</p>

<h2 id="capdl-util-scripts-readme">CapDL util scripts [<a href="cdl-utils">Readme</a>]</h2>

<p>A collection of standalone scripts for using capDL in build scripts.</p>

  </div>







  
    
<div class="sidebar-toc hidden-xs hidden-sm col-md-3 col-lg-3">
    <ul class="section-nav">
<li class="toc-entry toc-h2"><a href="#example-spec">Example Spec</a></li>
<li class="toc-entry toc-h2"><a href="#capdl-translator-capdl-tool-readme">CapDL Translator (capDL-tool) [Readme]</a></li>
<li class="toc-entry toc-h2"><a href="#capdl-loader-capdl-loader-app-readme">CapDL Loader (capdl-loader-app) [Readme]</a></li>
<li class="toc-entry toc-h2"><a href="#python-capdl-library-python-capdl-tool-readme">Python CapDL Library (python-capdl-tool) [Readme]</a></li>
<li class="toc-entry toc-h2"><a href="#cmake-libsel4-object-size-yaml-generation-target-readme">CMake libsel4 object size yaml generation target [Readme]</a></li>
<li class="toc-entry toc-h2"><a href="#capdl-util-scripts-readme">CapDL util scripts [Readme]</a></li>
</ul>
</div>

  
  
<div class="sidebar-toc hidden-xs hidden-sm col-md-3 col-lg-3">
  
    <ul class="section-nav">
    	<h2> CapDL </h2> 
        <li>
          
          <a style=" font-weight: bold; " class="" href="/projects/capdl/">
            Documentation homepage
          </a>
        </li>

















    
        <h3>Repositories</h3>
    
        <li>
          <a class="" href="https://github.com/seL4/capdl">
            capdl
          </a>
        </li>









  
      
          <h3>Releases</h3>
      
          <li>
            <a style="" href="/releases/capdl/0.1.0.html">
              CapDL 0.1.0
            </a>
          </li>
  
      
          <li>
            <a style="" href="/releases/capdl/0.2.1.html">
              0.2.1
            </a>
          </li>
  
      
          <li>
            <a style="" href="/releases/capdl/0.2.0.html">
              capdl-0.2.0
            </a>
          </li>
  





    </ul>

</div>


</div>

    </main>
    


<footer class="site-footer">

  <h2 class="footer-heading">seL4 docs</h2>

  <div class="footer-col-wrapper">

    <div class="col-md-2">
      



<ul class="social-media-list">
  <li><a href="https://github.com/sel4"><i class="fab fa-github"></i> <span class="username">sel4</span></a></li><li><a href="https://github.com/sel4proj"><i class="fab fa-github"></i> <span class="username">sel4proj</span></a></li>
</ul>

    </div>

    <div class="col-md-8">
      <ul class="list-unstyled">
        <li>
          This site is for displaying seL4 related documentation.  Pull requests are welcome.
        </li>
        
          <li>
            Site last updated: Thu Jun 15 10:41:07 2023 +1000 647953f
          </li>
          <li>
                Page last updated: Thu Jun 15 10:41:07 2023 +1000 647953f
          </li>
        
      </ul>
    </div>
    <div class="col-md-2">
<a href="https://github.com/seL4/docs/blob/master/projects/capdl/index.md">View page on GitHub</a>
      <br />
      <a href="https://github.com/seL4/docs/edit/master/projects/capdl/index.md">Edit page on GitHub</a>
      <br />
      <a href="/sitemap">Sitemap</a>
    </div>

  </div>

</footer>

  </body>
</html>
